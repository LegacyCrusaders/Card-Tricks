<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PIN Lock Screen</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(180deg, #050b20, #101c38);
        color: white;
    }

    .phone {
        width: 360px;
        height: 740px;
        border-radius: 30px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 20px;
        box-sizing: border-box;
        position: relative;
    }

    .header {
        text-align: center;
    }

    .header h1 {
        margin: 0;
        font-size: 28px;
    }

    .header p {
        margin: 5px 0 20px;
        font-size: 14px;
        opacity: 0.8;
    }

    .dots {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-bottom: 20px;
    }

    .dot {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        border: 2px solid white;
    }

    .dot.filled {
        background: white;
    }

    .keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 18px;
        margin-bottom: 20px;
    }

    .key {
        height: 70px;
        border-radius: 50%;
        background: rgba(255,255,255,0.12);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        font-size: 24px;
        cursor: pointer;
        user-select: none;
    }

    .key .letters {
        font-size: 10px;
        opacity: 0.7;
    }

    .key:active {
        background: rgba(255,255,255,0.25);
    }

    .bottom-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
    }

    .icon-btn {
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }

    .fingerprint {
        margin: 20px auto 0;
        width: 60px;
        height: 60px;
    }

    .emergency {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 16px;
        cursor: pointer;
        opacity: 0.8;
    }

    .unlock {
        display: none;
        width: 100%;
        height: 100%;
        background: white;
        color: black;
        justify-content: center;
        align-items: center;
        font-size: 72px;
        font-weight: 600;
    }

    .red { color: red; }
    .black { color: black; }

    .shake {
        animation: shake 0.3s;
    }

    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-8px); }
        50% { transform: translateX(8px); }
        75% { transform: translateX(-8px); }
        100% { transform: translateX(0); }
    }
</style>
</head>
<body>

<div class="phone" id="lockScreen">
    <div class="header">
        <h1>Enter PIN</h1>
        <p>Your PIN should contain at least 4 digits</p>
    </div>

    <div class="dots" id="dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>

    <div class="keypad">
        <div class="key"><span>1</span><span class="letters"></span></div>
        <div class="key"><span>2</span><span class="letters">ABC</span></div>
        <div class="key"><span>3</span><span class="letters">DEF</span></div>
        <div class="key"><span>4</span><span class="letters">GHI</span></div>
        <div class="key"><span>5</span><span class="letters">JKL</span></div>
        <div class="key"><span>6</span><span class="letters">MNO</span></div>
        <div class="key"><span>7</span><span class="letters">PQRS</span></div>
        <div class="key"><span>8</span><span class="letters">TUV</span></div>
        <div class="key"><span>9</span><span class="letters">WXYZ</span></div>
        <div class="key icon-btn" id="back"><svg fill="white" viewBox="0 0 24 24" width="28" height="28"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg></div>
        <div class="key"><span>0</span><span class="letters"></span></div>
        <div class="key icon-btn" id="enter"><svg fill="white" viewBox="0 0 24 24" width="28" height="28"><path d="M10 17l5-5-5-5v10z"/></svg></div>
    </div>

    <div class="fingerprint">
        <svg fill="white" viewBox="0 0 24 24" width="60" height="60"><path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm0 22c-5.523 0-10-4.477-10-10S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/><path d="M12 6c-3.313 0-6 2.687-6 6s2.687 6 6 6 6-2.687 6-6-2.687-6-6-6zm0 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"/></svg>
    </div>

    <div class="emergency">Emergency Call</div>
</div>

<div class="unlock" id="unlockScreen"></div>

<script>
let entered = [];
const dots = document.querySelectorAll('.dot');
const keys = document.querySelectorAll('.key');
const lockScreen = document.getElementById('lockScreen');
const unlockScreen = document.getElementById('unlockScreen');

keys.forEach(key => {
    key.addEventListener('click', () => {
        const val = key.querySelector('span')?.textContent;
        if (!val) return;
        if (entered.length >= 4) return;
        entered.push(parseInt(val));
        dots[entered.length - 1].classList.add('filled');

        if (entered.length === 4) {
            setTimeout(checkCode, 150);
        }
    });
});

// Back button
document.getElementById('back').addEventListener('click', () => {
    if (entered.length === 0) return;
    entered.pop();
    dots[entered.length].classList.remove('filled');
});

// Enter button
document.getElementById('enter').addEventListener('click', checkCode);

function reset() {
    entered = [];
    dots.forEach(d => d.classList.remove('filled'));
}

function fail() {
    lockScreen.classList.add('shake');
    setTimeout(() => {
        lockScreen.classList.remove('shake');
        reset();
    }, 300);
}

function checkCode() {
    if (entered.length !== 4) {
        fail();
        return;
    }

    const [a,b,c,suit] = entered;

    const allowedValues = [0,1,2,4,8];
    const suitMap = {
        1: {char: '♣', color: 'black'},
        2: {char: '♥', color: 'red'},
        3: {char: '♠', color: 'black'},
        4: {char: '♦', color: 'red'}
    };

    if (!suitMap[suit]) { fail(); return; }
    if (![a,b,c].every(v => allowedValues.includes(v))) { fail(); return; }
    const sum = a+b+c;
    if (sum < 1 || sum > 13) { fail(); return; }

    reveal(sum, suitMap[suit]);
}

function reveal(value, suit) {
    lockScreen.style.display = 'none';
    unlockScreen.style.display = 'flex';

    let label;
    if (value === 1) label = 'A';
    else if (value === 11) label = 'J';
    else if (value === 12) label = 'Q';
    else if (value === 13) label = 'K';
    else label = value;

    unlockScreen.innerHTML = `<span class="${suit.color}" style="font-size:72px;">${label}${suit.char}</span>`;
}
</script>

</body>
</html>
