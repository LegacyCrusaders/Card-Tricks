<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Lock Screen Rewind</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 105vh;
  overflow-x: hidden;
  background: linear-gradient(to bottom, #6a4fff 0%, #2c1e8f 100%);
  font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
}

#startOverlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(to bottom, #6a4fff 0%, #2c1e8f 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: #e0dfff;
  z-index: 10;
  user-select: none;
}

#startOverlay .title {
  font-size: 28px;
  margin-bottom: 12px;
}

#startOverlay .version {
  font-size: 14px;
  opacity: 0.7;
}

#phone {
  display: none;
  width: 100vw;
  height: 100vh;
  position: relative;
  background: linear-gradient(to bottom, #6a4fff 0%, #2c1e8f 100%);
  color: #e0dfff;
}

.lock-icon {
  position: absolute;
  top: 48px;
  left: 50%;
  transform: translateX(-50%);
  width: 26px;
  height: 26px;
}

.lock-icon svg {
  fill: white;
}

.center {
  position: absolute;
  top: 35%;
  width: 100%;
  text-align: center;
}

.time {
  font-size: 100px;
  font-weight: 300;
  letter-spacing: -2px;
}

.date {
  font-size: 24px;
  margin-top: 8px;
}

.corner-button {
  position: absolute;
  bottom: 40px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
}

.corner-button svg {
  width: 50%;
  height: 50%;
  fill: white;
}

.phone-btn { left: 40px; }
.camera-btn { right: 40px; }
</style>
</head>

<body>

<div id="startOverlay">
  <div class="title">Tap to Begin</div>
  <div class="version">v1.0.3</div>
</div>

<div id="phone">
  <div class="lock-icon">
    <svg viewBox="0 0 24 24">
      <path d="M12 2c-2.76 0-5 2.24-5 5v3H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2h-1V7c0-2.76-2.24-5-5-5zm-3 5c0-1.66 1.34-3 3-3s3 1.34 3 3v3H9V7z"/>
    </svg>
  </div>

  <div class="center">
    <div class="time" id="time">--:--</div>
    <div class="date" id="date"></div>
  </div>

  <div class="corner-button phone-btn">
    <svg viewBox="0 0 24 24">
      <path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1C10.07 21 3 13.93 3 5c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.24.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
    </svg>
  </div>

  <div class="corner-button camera-btn">
    <svg viewBox="0 0 24 24">
      <path d="M12 5c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
    </svg>
  </div>
</div>

<script>
let fakeTime = new Date();
fakeTime.setMinutes(fakeTime.getMinutes() + 5);

let wasFaceDown = false;
let rewinding = false;
let finished = false;

function formatTime(d) {
  let h = d.getHours() % 12 || 12;
  let m = d.getMinutes();
  return h + ":" + String(m).padStart(2, "0");
}

function updateDisplay(d) {
  document.getElementById("time").textContent = formatTime(d);
  document.getElementById("date").textContent =
    d.toLocaleDateString(undefined, { weekday: "short", month: "long", day: "numeric" });
}

function startFakeClock() {
  updateDisplay(fakeTime);
  setInterval(() => {
    if (!finished) {
      fakeTime.setSeconds(fakeTime.getSeconds() + 1);
      updateDisplay(fakeTime);
    }
  }, 1000);
}

function startRewind() {
  setTimeout(() => {
    const delays = [800, 400, 250, 500, 900];
    let step = 0;

    function rewindStep() {
      if (step >= delays.length) {
        finished = true;
        setInterval(() => updateDisplay(new Date()), 1000);
        return;
      }
      fakeTime.setMinutes(fakeTime.getMinutes() - 1);
      updateDisplay(fakeTime);
      setTimeout(rewindStep, delays[step++]);
    }

    rewindStep();
  }, 3000);
}

window.addEventListener("deviceorientation", e => {
  if (e.beta > 150 || e.beta < -150) wasFaceDown = true;
  if (wasFaceDown && e.beta > -30 && e.beta < 30 && !rewinding) {
    rewinding = true;
    startRewind();
  }
});

document.getElementById("startOverlay").onclick = async () => {
  document.getElementById("startOverlay").style.display = "none";
  document.getElementById("phone").style.display = "block";
  if (document.documentElement.requestFullscreen)
    await document.documentElement.requestFullscreen();
  startFakeClock();
};
</script>

</body>
</html>
